<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Koala Ormanƒ±</title>

<style>
body{margin:0;font-family:-apple-system,system-ui,Arial;background:#EAF6FF;color:#0f172a}
.wrap{max-width:520px;margin:0 auto;padding:16px}
.card{background:#fff;border-radius:16px;padding:16px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
h1{font-size:22px;margin:0 0 10px}
.sub{opacity:.7;margin:0 0 14px;font-weight:700}
.ver{font-size:12px;font-weight:900;background:#EAF2FF;padding:6px 10px;border-radius:999px}

.btn{width:100%;border:0;border-radius:14px;padding:14px;margin:10px 0;font-size:16px;font-weight:900;background:#1F6FEB;color:#fff}
.btn.secondary{background:#EAF2FF;color:#1F6FEB}
.btn.ghost{background:#F1F5F9;color:#0f172a}

.row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
.pill{background:#F1F5F9;padding:10px 12px;border-radius:999px;font-weight:900}

.hidden{display:none}

/* KOALA */
.koala{width:52px;height:52px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:20px}

/* FOREST */
.forestGrid{margin-top:12px}

/* OVERLAY */
#overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,.5);
display:none;
align-items:center;
justify-content:center;
z-index:9999;
}
#overlayBox{
background:#fff;
padding:20px;
border-radius:18px;
width:90%;
max-width:400px;
text-align:center;
}
</style>
</head>

<body>
<div class="wrap">

<div class="card" id="home">
<div style="display:flex;justify-content:space-between;align-items:center">
<h1 style="margin:0">Peri ve ƒ∞pek‚Äôin Koala Ormanƒ±</h1>
<span class="ver">v9</span>
</div>

<p class="sub">Bug√ºn 5 dakika. √úz√ºlmek yok. Koalalar b√ºy√ºr.</p>

<button class="btn" onclick="startGame()">Ba≈üla</button>
<button class="btn secondary" onclick="showForest()">Ormana Bak</button>

<div class="row">
<div class="pill">‚≠ê <span id="stars">0</span></div>
<div class="pill">üå≥ <span id="trees">1</span></div>
</div>

<div id="homeKoalas"></div>
</div>

<div class="card hidden" id="game">
<h1 id="question">2 √ó 2 = ?</h1>
<input id="answer" style="width:100%;padding:10px;font-size:20px"/>
<button class="btn" onclick="check()">OK</button>
<button class="btn ghost" onclick="backHome()">Geri</button>
</div>

<div class="card hidden" id="forest">
<h1>Orman</h1>
<div id="forestGrid"></div>
<button class="btn ghost" onclick="backHome()">Geri</button>
</div>

</div>

<div id="overlay">
<div id="overlayBox">
<h2 id="ovTitle"></h2>
<p id="ovText"></p>
<button class="btn" onclick="closeOverlay()">Tamam</button>
</div>
</div>

<script>
const SKEY="koala_state_v9"

function load(){
try{
const r=localStorage.getItem(SKEY)
if(r)return JSON.parse(r)
}catch{}
return{stars:0,koalas:1}
}
const state=load()

function save(){localStorage.setItem(SKEY,JSON.stringify(state))}

function render(){
document.getElementById("stars").textContent=state.stars
document.getElementById("trees").textContent=Math.ceil(state.koalas/4)
document.getElementById("homeKoalas").innerHTML="üê®".repeat(state.koalas)
}

function show(id){
home.classList.add("hidden")
game.classList.add("hidden")
forest.classList.add("hidden")
document.getElementById(id).classList.remove("hidden")
}

window.startGame=function(){
show("game")
newQuestion()
}

window.backHome=function(){
show("home")
render()
}

window.showForest=function(){
show("forest")
forestGrid.innerHTML="üê®".repeat(state.koalas)
}

let a=2,b=2

function newQuestion(){
a=Math.floor(Math.random()*8)+2
b=Math.floor(Math.random()*8)+2
question.textContent=a+" √ó "+b+" = ?"
answer.value=""
}

window.check=function(){
const val=Number(answer.value)
if(val===a*b){
state.stars++
if(state.stars%5===0){
state.koalas++
openOverlay("Yeni Koala! üéâ","Ormana yeni bir koala katƒ±ldƒ±.")
}
}
save()
newQuestion()
}

function openOverlay(title,text){
document.getElementById("ovTitle").textContent=title
document.getElementById("ovText").textContent=text
document.getElementById("overlay").style.display="flex"
}

window.closeOverlay=function(){
document.getElementById("overlay").style.display="none"
}

render()
</script>

</body>
</html>
